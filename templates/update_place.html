<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../static/styles/update_place.css">
    <link rel="stylesheet" href="../static/styles/styles.css">
    <link rel="stylesheet" href="../static/styles/alert_box.css">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <title>Update place details</title>
</head>
<body>
  <header>
    <nav>
      <a id="hbnb-logo" href="{{ url_for('index') }}"><img id="hbnb_logo" src="../static/assets/logo.png" alt="logo"></a>
      <ul>
        <li><a href="/contact">CONTACT US</a></li>
          {% if session.get('jwt_token') %}
          <li><a href="/dashboard">DASHBOARD</a></li>
          <li><a href="/logout" id="login-link">LOGOUT</a></li>
          {% else %}
          <li><a href="{{ url_for('login') }}" id="login-link">LOGIN</a></li>
          {% endif %}
      </ul>
    </nav>
</header>
<!-- Custom Confirmation Dialog -->

<div id="form-wrap">
  <div id="form-box">
    {% if place %}
      <h1>Update {{ place.title }}'s details</h1>
    {% endif %}
      <!-- <form id="update-form"> -->
      <form id="update-form">
        <label for="">Title:</label>
        <input id="title" type="title" value="{{ place.title }}" placeholder="" required>
        <label for="description">Description:</label>
        <input id="description" type="description" value="{{ place.description }}" placeholder="" required>
        <label for="price">Price:</label>
        <input id="price" type="number" value="{{ place.price }}" placeholder="$" required>
        <input type="hidden" id="place_id" value="{{ place.id }}">
        <button id="submit-btn" type="submit">Update details</button>
        <button onclick="deletePlace('{{ place.id }}')" id="delete-btn" data-place-id="{{ place.id }}"><i class="fa-solid fa-circle-xmark"></i> Delete this place</button>
      </form>
    </div>
  </div>
  <footer style="bottom: 0;">
    <div id="slogan_div">
      <img style="width: 80px; margin-right: 20px;" id="hbnb-logo" src="../static/assets/logo.png" alt="logo">
      <p>Your go-to platform for amazing places to stay â€“ from cozy cabins to luxurious villas!</p>
    </div>
    <div id="social_policy">
      <div id="social">
        <h1 id="contact">Connect with us</h1>
          <ul>
            <li><i class="fa-brands fa-facebook"></i></li>
            <li><i class="fa-brands fa-twitter"></i></li>
            <li><i class="fa-brands fa-instagram"></i></li>
          </ul>
      </div>
      <div id="policy">
        <p>&copy; 2024 HBnB, Inc. All rights reserved. | <a href="/privacy">Privacy Policy</a> | <a href="/cookies">Cookie Policy</a></p>
    </div>
  </div>
  </footer>
  <!-- <script>
    document.getElementById('delete-btn').addEventListener('click', function (e) {
    e.preventDefault(); // Prevent default behavior (if it's inside a form or link)

    const placeId = this.getAttribute('data-place-id'); // Get the place id from the button data attribute
    const confirmDelete = window.confirm("Are you sure you want to delete this place?");
    // Make the DELETE request using Axios
    if (confirmDelete) {
    axios.delete(`/update_place/${placeId}`)
      .then(function (response) {
        console.log('Place deleted successfully:', response);
        window.location.href = '/dashboard'; // Redirect to the dashboard after deletion
      })
      .catch(function (error) {
        console.error('Error deleting the place:', error);
        alert('Failed to delete the place. Please try again.');
      });
    }
    });
    </script> -->
  <script src="../static/delete_place.js"></script>
  <script src="../static/update_place.js"></script>
  <script src="../static/scripts.js"></script>
</body>
</html>
